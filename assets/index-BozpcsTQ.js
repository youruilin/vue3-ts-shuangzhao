import{d as Z,e as N,a as q,b as l,m as ae,p as ee,t as $,f as W,g as oe,I as ne,H as ye,n as ie,w as ue,i as Oe,h as X,j as te,k as K,r as _,l as U,u as Ne,q as st,s as pe,v as me,x as G,y as rt,z as ct,A,B as ut,C as ce,D as Ye,E as dt,F as Ce,G as Ae,J as He,K as je,L as De,M as mt,N as Ve,O as we,P as ft,Q as Xe,R as vt,S as Me,T as gt,U as ht,V as Ze,W as We,X as yt,Y as Ke,Z as wt,$ as _e,a0 as bt,c as xt,a1 as F,a2 as ve,a3 as Ct,a4 as kt,o as It,a5 as St,_ as Dt}from"./index-DgftvtFR.js";/* empty css              */import{S as Pt,a as Ot}from"./index-DcZgV_BW.js";/* empty css              */import{F as pt}from"./index-D5LrvKK4.js";import{N as Tt}from"./index-B0QwTD1K.js";import{t as Vt}from"./task-EYanb29D.js";import{u as Mt,a as _t}from"./my-GmG3wGLK.js";import{m as Rt}from"./my-CugCDfJN.js";import{F as Bt}from"./index-CPZTBkbF.js";import{p as $t,P as Ge,a as Lt,L as be,u as qe,b as de,m as Et,c as Ut,s as le}from"./request-DzjGBWQs.js";import"./task-BfGbhDOM.js";const[zt,Y]=q("action-sheet"),Ft=N({},Lt,{title:String,round:$,actions:oe(),closeIcon:W("cross"),closeable:$,cancelText:String,description:String,closeOnPopstate:$,closeOnClickAction:Boolean,safeAreaInsetBottom:$}),Nt=[...$t,"round","closeOnPopstate","safeAreaInsetBottom"];var Yt=Z({name:zt,props:Ft,emits:["select","cancel","update:show"],setup(e,{slots:n,emit:a}){const t=r=>a("update:show",r),i=()=>{t(!1),a("cancel")},u=()=>{if(e.title)return l("div",{class:Y("header")},[e.title,e.closeable&&l(ne,{name:e.closeIcon,class:[Y("close"),ye],onClick:i},null)])},b=()=>{if(n.cancel||e.cancelText)return[l("div",{class:Y("gap")},null),l("button",{type:"button",class:Y("cancel"),onClick:i},[n.cancel?n.cancel():e.cancelText])]},k=r=>{if(r.icon)return l(ne,{class:Y("item-icon"),name:r.icon},null)},w=(r,S)=>r.loading?l(be,{class:Y("loading-icon")},null):n.action?n.action({action:r,index:S}):[l("span",{class:Y("name")},[r.name]),r.subname&&l("div",{class:Y("subname")},[r.subname])],O=(r,S)=>{const{color:v,loading:s,callback:M,disabled:g,className:p}=r,V=()=>{g||s||(M&&M(r),e.closeOnClickAction&&t(!1),ie(()=>a("select",r,S)))};return l("button",{type:"button",style:{color:v},class:[Y("item",{loading:s,disabled:g}),p],onClick:V},[k(r),w(r,S)])},f=()=>{if(e.description||n.description){const r=n.description?n.description():e.description;return l("div",{class:Y("description")},[r])}};return()=>l(Ge,ae({class:Y(),position:"bottom","onUpdate:show":t},ee(e,Nt)),{default:()=>{var r;return[u(),f(),l("div",{class:Y("content")},[e.actions.map(O),(r=n.default)==null?void 0:r.call(n)]),b()]}})}});const At=ue(Yt),[Ht,Q,Re]=q("picker"),Je=e=>e.find(n=>!n.disabled)||e[0];function jt(e,n){const a=e[0];if(a){if(Array.isArray(a))return"multiple";if(n.children in a)return"cascade"}return"default"}function ge(e,n){n=X(n,0,e.length);for(let a=n;a<e.length;a++)if(!e[a].disabled)return a;for(let a=n-1;a>=0;a--)if(!e[a].disabled)return a;return 0}const Be=(e,n,a)=>n!==void 0&&e.some(t=>t[a.value]===n);function Pe(e,n,a){const t=e.findIndex(u=>u[a.value]===n),i=ge(e,t);return e[i]}function Xt(e,n,a){const t=[];let i={[n.children]:e},u=0;for(;i&&i[n.children];){const b=i[n.children],k=a.value[u];if(i=Oe(k)?Pe(b,k,n):void 0,!i&&b.length){const w=Je(b)[n.value];i=Pe(b,w,n)}u++,t.push(b)}return t}function Zt(e){const{transform:n}=window.getComputedStyle(e),a=n.slice(7,n.length-1).split(", ")[5];return Number(a)}function Wt(e){return N({text:"text",value:"value",children:"children"},e)}const $e=200,Le=300,Kt=15,[Qe,ke]=q("picker-column"),et=Symbol(Qe);var Gt=Z({name:Qe,props:{value:K,fields:te(Object),options:oe(),readonly:Boolean,allowHtml:Boolean,optionHeight:te(Number),swipeDuration:te(K),visibleOptionNum:te(K)},emits:["change","clickOption","scrollInto"],setup(e,{emit:n,slots:a}){let t,i,u,b,k;const w=_(),O=_(),f=_(0),r=_(0),S=qe(),v=()=>e.options.length,s=()=>e.optionHeight*(+e.visibleOptionNum-1)/2,M=C=>{let o=ge(e.options,C);const m=-o*e.optionHeight,x=()=>{o>v()-1&&(o=ge(e.options,C));const z=e.options[o][e.fields.value];z!==e.value&&n("change",z)};t&&m!==f.value?k=x:x(),f.value=m},g=()=>e.readonly||!e.options.length,p=C=>{t||g()||(k=null,r.value=$e,M(C),n("clickOption",e.options[C]))},V=C=>X(Math.round(-C/e.optionHeight),0,v()-1),D=U(()=>V(f.value)),R=(C,o)=>{const m=Math.abs(C/o);C=f.value+m/.003*(C<0?-1:1);const x=V(C);r.value=+e.swipeDuration,M(x)},c=()=>{t=!1,r.value=0,k&&(k(),k=null)},y=C=>{if(!g()){if(S.start(C),t){const o=Zt(O.value);f.value=Math.min(0,o-s())}r.value=0,i=f.value,u=Date.now(),b=i,k=null}},L=C=>{if(g())return;S.move(C),S.isVertical()&&(t=!0,me(C,!0));const o=X(i+S.deltaY.value,-(v()*e.optionHeight),e.optionHeight),m=V(o);m!==D.value&&n("scrollInto",e.options[m]),f.value=o;const x=Date.now();x-u>Le&&(u=x,b=o)},d=()=>{if(g())return;const C=f.value-b,o=Date.now()-u;if(o<Le&&Math.abs(C)>Kt){R(C,o);return}const x=V(f.value);r.value=$e,M(x),setTimeout(()=>{t=!1},0)},I=()=>{const C={height:`${e.optionHeight}px`};return e.options.map((o,m)=>{const x=o[e.fields.text],{disabled:z}=o,H=o[e.fields.value],h={role:"button",style:C,tabindex:z?-1:0,class:[ke("item",{disabled:z,selected:H===e.value}),o.className],onClick:()=>p(m)},P={class:"van-ellipsis",[e.allowHtml?"innerHTML":"textContent"]:x};return l("li",h,[a.option?a.option(o,m):l("div",P,null)])})};return Ne(et),de({stopMomentum:c}),st(()=>{const C=t?Math.floor(-f.value/e.optionHeight):e.options.findIndex(x=>x[e.fields.value]===e.value),o=ge(e.options,C),m=-o*e.optionHeight;t&&o<C&&c(),f.value=m}),pe("touchmove",L,{target:w}),()=>l("div",{ref:w,class:ke(),onTouchstartPassive:y,onTouchend:d,onTouchcancel:d},[l("ul",{ref:O,style:{transform:`translate3d(0, ${f.value+s()}px, 0)`,transitionDuration:`${r.value}ms`,transitionProperty:r.value?"all":"none"},class:ke("wrapper"),onTransitionend:c},[I()])])}});const[qt]=q("picker-toolbar"),xe={title:String,cancelButtonText:String,confirmButtonText:String},Jt=["cancel","confirm","title","toolbar"],Qt=Object.keys(xe);var en=Z({name:qt,props:xe,emits:["confirm","cancel"],setup(e,{emit:n,slots:a}){const t=()=>{if(a.title)return a.title();if(e.title)return l("div",{class:[Q("title"),"van-ellipsis"]},[e.title])},i=()=>n("cancel"),u=()=>n("confirm"),b=()=>{var w;const O=(w=e.cancelButtonText)!=null?w:Re("cancel");if(!(!a.cancel&&!O))return l("button",{type:"button",class:[Q("cancel"),ye],onClick:i},[a.cancel?a.cancel():O])},k=()=>{var w;const O=(w=e.confirmButtonText)!=null?w:Re("confirm");if(!(!a.confirm&&!O))return l("button",{type:"button",class:[Q("confirm"),ye],onClick:u},[a.confirm?a.confirm():O])};return()=>l("div",{class:Q("toolbar")},[a.toolbar?a.toolbar():[b(),t(),k()]])}});const[tn,na]=q("picker-group"),nn=Symbol(tn);N({tabs:oe(),activeTab:G(0),nextStepText:String,showToolbar:$},xe);const Te=N({loading:Boolean,readonly:Boolean,allowHtml:Boolean,optionHeight:G(44),showToolbar:$,swipeDuration:G(1e3),visibleOptionNum:G(6)},xe),an=N({},Te,{columns:oe(),modelValue:oe(),toolbarPosition:W("top"),columnsFieldNames:Object});var on=Z({name:Ht,props:an,emits:["confirm","cancel","change","scrollInto","clickOption","update:modelValue"],setup(e,{emit:n,slots:a}){const t=_(),i=_(e.modelValue.slice(0)),{parent:u}=Ne(nn),{children:b,linkChildren:k}=rt(et);k();const w=U(()=>Wt(e.columnsFieldNames)),O=U(()=>ct(e.optionHeight)),f=U(()=>jt(e.columns,w.value)),r=U(()=>{const{columns:o}=e;switch(f.value){case"multiple":return o;case"cascade":return Xt(o,w.value,i);default:return[o]}}),S=U(()=>r.value.some(o=>o.length)),v=U(()=>r.value.map((o,m)=>Pe(o,i.value[m],w.value))),s=U(()=>r.value.map((o,m)=>o.findIndex(x=>x[w.value.value]===i.value[m]))),M=(o,m)=>{if(i.value[o]!==m){const x=i.value.slice(0);x[o]=m,i.value=x}},g=()=>({selectedValues:i.value.slice(0),selectedOptions:v.value,selectedIndexes:s.value}),p=(o,m)=>{M(m,o),f.value==="cascade"&&i.value.forEach((x,z)=>{const H=r.value[z];Be(H,x,w.value)||M(z,H.length?H[0][w.value.value]:void 0)}),ie(()=>{n("change",N({columnIndex:m},g()))})},V=(o,m)=>{const x={columnIndex:m,currentOption:o};n("clickOption",N(g(),x)),n("scrollInto",x)},D=()=>{b.forEach(m=>m.stopMomentum());const o=g();return ie(()=>{const m=g();n("confirm",m)}),o},R=()=>n("cancel",g()),c=()=>r.value.map((o,m)=>l(Gt,{value:i.value[m],fields:w.value,options:o,readonly:e.readonly,allowHtml:e.allowHtml,optionHeight:O.value,swipeDuration:e.swipeDuration,visibleOptionNum:e.visibleOptionNum,onChange:x=>p(x,m),onClickOption:x=>V(x,m),onScrollInto:x=>{n("scrollInto",{currentOption:x,columnIndex:m})}},{option:a.option})),y=o=>{if(S.value){const m={height:`${O.value}px`},x={backgroundSize:`100% ${(o-O.value)/2}px`};return[l("div",{class:Q("mask"),style:x},null),l("div",{class:[ut,Q("frame")],style:m},null)]}},L=()=>{const o=O.value*+e.visibleOptionNum,m={height:`${o}px`};return!e.loading&&!S.value&&a.empty?a.empty():l("div",{ref:t,class:Q("columns"),style:m},[c(),y(o)])},d=()=>{if(e.showToolbar&&!u)return l(en,ae(ee(e,Qt),{onConfirm:D,onCancel:R}),ee(a,Jt))};A(r,o=>{o.forEach((m,x)=>{m.length&&!Be(m,i.value[x],w.value)&&M(x,Je(m)[w.value.value])})},{immediate:!0});let I;return A(()=>e.modelValue,o=>{!ce(o,i.value)&&!ce(o,I)&&(i.value=o.slice(0),I=o.slice(0))},{deep:!0}),A(i,o=>{ce(o,e.modelValue)||(I=o.slice(0),n("update:modelValue",I))},{immediate:!0}),pe("touchmove",me,{target:t}),de({confirm:D,getSelectedOptions:()=>v.value}),()=>{var o,m;return l("div",{class:Q()},[e.toolbarPosition==="top"?d():null,e.loading?l(be,{class:Q("loading")},null):null,(o=a["columns-top"])==null?void 0:o.call(a),L(),(m=a["columns-bottom"])==null?void 0:m.call(a),e.toolbarPosition==="bottom"?d():null])}}});const tt=ue(on),ln=N({},Te,{modelValue:oe(),filter:Function,formatter:{type:Function,default:(e,n)=>n}}),sn=Object.keys(Te);function rn(e,n){if(e<0)return[];const a=Array(e);let t=-1;for(;++t<e;)a[t]=n(t);return a}const cn=(e,n)=>32-new Date(e,n-1,32).getDate(),Ie=(e,n,a,t,i,u)=>{const b=rn(n-e+1,k=>{const w=Ye(e+k);return t(a,{text:w,value:w})});return i?i(a,b,u):b},un=(e,n)=>e.map((a,t)=>{const i=n[t];if(i.length){const u=+i[0].value,b=+i[i.length-1].value;return Ye(X(+a,u,b))}return a}),[dn,se]=q("image"),mn={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:K,height:K,radius:K,lazyLoad:Boolean,iconSize:K,showError:$,errorIcon:W("photo-fail"),iconPrefix:String,showLoading:$,loadingIcon:W("photo"),crossorigin:String,referrerpolicy:String};var fn=Z({name:dn,props:mn,emits:["load","error"],setup(e,{emit:n,slots:a}){const t=_(!1),i=_(!0),u=_(),{$Lazyload:b}=dt().proxy,k=U(()=>{const g={width:Ce(e.width),height:Ce(e.height)};return Oe(e.radius)&&(g.overflow="hidden",g.borderRadius=Ce(e.radius)),g});A(()=>e.src,()=>{t.value=!1,i.value=!0});const w=g=>{i.value&&(i.value=!1,n("load",g))},O=()=>{const g=new Event("load");Object.defineProperty(g,"target",{value:u.value,enumerable:!0}),w(g)},f=g=>{t.value=!0,i.value=!1,n("error",g)},r=(g,p,V)=>V?V():l(ne,{name:g,size:e.iconSize,class:p,classPrefix:e.iconPrefix},null),S=()=>{if(i.value&&e.showLoading)return l("div",{class:se("loading")},[r(e.loadingIcon,se("loading-icon"),a.loading)]);if(t.value&&e.showError)return l("div",{class:se("error")},[r(e.errorIcon,se("error-icon"),a.error)])},v=()=>{if(t.value||!e.src)return;const g={alt:e.alt,class:se("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?De(l("img",ae({ref:u},g),null),[[mt("lazy"),e.src]]):l("img",ae({ref:u,src:e.src,onLoad:w,onError:f},g),null)},s=({el:g})=>{const p=()=>{g===u.value&&i.value&&O()};u.value?p():ie(p)},M=({el:g})=>{g===u.value&&!t.value&&f()};return b&&Ae&&(b.$on("loaded",s),b.$on("error",M),He(()=>{b.$off("loaded",s),b.$off("error",M)})),je(()=>{ie(()=>{var g;(g=u.value)!=null&&g.complete&&!e.lazyLoad&&O()})}),()=>{var g;return l("div",{class:se({round:e.round,block:e.block}),style:k.value},[v(),S(),(g=a.default)==null?void 0:g.call(a)])}}});const nt=ue(fn),Ee=new Date().getFullYear(),[vn]=q("date-picker"),gn=N({},ln,{columnsType:{type:Array,default:()=>["year","month","day"]},minDate:{type:Date,default:()=>new Date(Ee-10,0,1),validator:Ve},maxDate:{type:Date,default:()=>new Date(Ee+10,11,31),validator:Ve}});var hn=Z({name:vn,props:gn,emits:["confirm","cancel","change","update:modelValue"],setup(e,{emit:n,slots:a}){const t=_(e.modelValue),i=_(!1),u=_(),b=U(()=>i.value?e.modelValue:t.value),k=c=>c===e.minDate.getFullYear(),w=c=>c===e.maxDate.getFullYear(),O=c=>c===e.minDate.getMonth()+1,f=c=>c===e.maxDate.getMonth()+1,r=c=>{const{minDate:y,columnsType:L}=e,d=L.indexOf(c),I=b.value[d];if(I)return+I;switch(c){case"year":return y.getFullYear();case"month":return y.getMonth()+1;case"day":return y.getDate()}},S=()=>{const c=e.minDate.getFullYear(),y=e.maxDate.getFullYear();return Ie(c,y,"year",e.formatter,e.filter,b.value)},v=()=>{const c=r("year"),y=k(c)?e.minDate.getMonth()+1:1,L=w(c)?e.maxDate.getMonth()+1:12;return Ie(y,L,"month",e.formatter,e.filter,b.value)},s=()=>{const c=r("year"),y=r("month"),L=k(c)&&O(y)?e.minDate.getDate():1,d=w(c)&&f(y)?e.maxDate.getDate():cn(c,y);return Ie(L,d,"day",e.formatter,e.filter,b.value)},M=()=>{var c;return(c=u.value)==null?void 0:c.confirm()},g=()=>t.value,p=U(()=>e.columnsType.map(c=>{switch(c){case"year":return S();case"month":return v();case"day":return s();default:return[]}}));A(t,c=>{ce(c,e.modelValue)||n("update:modelValue",c)}),A(()=>e.modelValue,(c,y)=>{i.value=ce(y,t.value),c=un(c,p.value),ce(c,t.value)||(t.value=c),i.value=!1},{immediate:!0});const V=(...c)=>n("change",...c),D=(...c)=>n("cancel",...c),R=(...c)=>n("confirm",...c);return de({confirm:M,getSelectedDate:g}),()=>l(tt,ae({ref:u,modelValue:t.value,"onUpdate:modelValue":c=>t.value=c,columns:p.value,onChange:V,onCancel:D,onConfirm:R},ee(e,sn)),a)}});const yn=ue(hn),Ue=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),wn=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),Se=q("image-preview")[1],ze=2.6,bn={src:String,show:Boolean,active:Number,minZoom:te(K),maxZoom:te(K),rootWidth:te(Number),rootHeight:te(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var xn=Z({props:bn,emits:["scale","close","longPress"],setup(e,{emit:n,slots:a}){const t=we({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),i=qe(),u=_(),b=_(),k=_(!1),w=_(!1);let O=0;const f=U(()=>{const{scale:h,moveX:P,moveY:T,moving:E,zooming:j,initializing:J}=t,fe={transitionDuration:j||E||J?"0s":".3s"};return(h!==1||w.value)&&(fe.transform=`matrix(${h}, 0, 0, ${h}, ${P}, ${T})`),fe}),r=U(()=>{if(t.imageRatio){const{rootWidth:h,rootHeight:P}=e,T=k.value?P/t.imageRatio:h;return Math.max(0,(t.scale*T-h)/2)}return 0}),S=U(()=>{if(t.imageRatio){const{rootWidth:h,rootHeight:P}=e,T=k.value?P:h*t.imageRatio;return Math.max(0,(t.scale*T-P)/2)}return 0}),v=(h,P)=>{var T;if(h=X(h,+e.minZoom,+e.maxZoom+1),h!==t.scale){const E=h/t.scale;if(t.scale=h,P){const j=Xe((T=u.value)==null?void 0:T.$el),J={x:j.width*.5,y:j.height*.5},fe=t.moveX-(P.x-j.left-J.x)*(E-1),it=t.moveY-(P.y-j.top-J.y)*(E-1);t.moveX=X(fe,-r.value,r.value),t.moveY=X(it,-S.value,S.value)}else t.moveX=0,t.moveY=w.value?O:0;n("scale",{scale:h,index:e.active})}},s=()=>{v(1)},M=()=>{const h=t.scale>1?1:2;v(h,h===2||w.value?{x:i.startX.value,y:i.startY.value}:void 0)};let g,p,V,D,R,c,y,L,d=!1;const I=h=>{const{touches:P}=h;if(g=P.length,g===2&&e.disableZoom)return;const{offsetX:T}=i;i.start(h),p=t.moveX,V=t.moveY,L=Date.now(),d=!1,t.moving=g===1&&(t.scale!==1||w.value),t.zooming=g===2&&!T.value,t.zooming&&(D=t.scale,R=Ue(P))},C=h=>{const{touches:P}=h;if(i.move(h),t.moving){const{deltaX:T,deltaY:E}=i,j=T.value+p,J=E.value+V;if((e.vertical?i.isVertical()&&Math.abs(J)>S.value:i.isHorizontal()&&Math.abs(j)>r.value)&&!d){t.moving=!1;return}d=!0,me(h,!0),t.moveX=X(j,-r.value,r.value),t.moveY=X(J,-S.value,S.value)}if(t.zooming&&(me(h,!0),P.length===2)){const T=Ue(P),E=D*T/R;c=wn(P),v(E,c)}},o=h=>{var P;const T=(P=b.value)==null?void 0:P.$el;if(!T)return;const E=T.firstElementChild,j=h.target===T,J=E==null?void 0:E.contains(h.target);!e.closeOnClickImage&&J||!e.closeOnClickOverlay&&j||n("close")},m=h=>{if(g>1)return;const P=Date.now()-L,T=250;i.isTap.value&&(P<T?e.doubleScale?y?(clearTimeout(y),y=null,M()):y=setTimeout(()=>{o(h),y=null},T):o(h):P>vt&&n("longPress"))},x=h=>{let P=!1;if((t.moving||t.zooming)&&(P=!0,t.moving&&p===t.moveX&&V===t.moveY&&(P=!1),!h.touches.length)){t.zooming&&(t.moveX=X(t.moveX,-r.value,r.value),t.moveY=X(t.moveY,-S.value,S.value),t.zooming=!1),t.moving=!1,p=0,V=0,D=1,t.scale<1&&s();const T=+e.maxZoom;t.scale>T&&v(T,c)}me(h,P),m(h),i.reset()},z=()=>{const{rootWidth:h,rootHeight:P}=e,T=P/h,{imageRatio:E}=t;k.value=t.imageRatio>T&&E<ze,w.value=t.imageRatio>T&&E>=ze,w.value&&(O=(E*h-P)/2,t.moveY=O,t.initializing=!0,ft(()=>{t.initializing=!1})),s()},H=h=>{const{naturalWidth:P,naturalHeight:T}=h.target;t.imageRatio=T/P,z()};return A(()=>e.active,s),A(()=>e.show,h=>{h||s()}),A(()=>[e.rootWidth,e.rootHeight],z),pe("touchmove",C,{target:U(()=>{var h;return(h=b.value)==null?void 0:h.$el})}),de({resetScale:s}),()=>{const h={loading:()=>l(be,{type:"spinner"},null)};return l(Pt,{ref:b,class:Se("swipe-item"),onTouchstartPassive:I,onTouchend:x,onTouchcancel:x},{default:()=>[a.image?l("div",{class:Se("image-wrap")},[a.image({src:e.src,onLoad:H,style:f.value})]):l(nt,{ref:u,src:e.src,fit:"contain",class:Se("image",{vertical:k.value}),style:f.value,onLoad:H},h)]})}}});const[Cn,re]=q("image-preview"),kn=["show","teleport","transition","overlayStyle","closeOnPopstate"],In={show:Boolean,loop:$,images:oe(),minZoom:G(1/3),maxZoom:G(3),overlay:$,vertical:Boolean,closeable:Boolean,showIndex:$,className:Me,closeIcon:W("clear"),transition:String,beforeClose:Function,doubleScale:$,overlayClass:Me,overlayStyle:Object,swipeDuration:G(300),startPosition:G(0),showIndicators:Boolean,closeOnPopstate:$,closeOnClickImage:$,closeOnClickOverlay:$,closeIconPosition:W("top-right"),teleport:[String,Object]};var at=Z({name:Cn,props:In,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:n,slots:a}){const t=_(),i=_(),u=we({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),b=()=>{if(t.value){const D=Xe(t.value.$el);u.rootWidth=D.width,u.rootHeight=D.height,t.value.resize()}},k=D=>n("scale",D),w=D=>n("update:show",D),O=()=>{Ze(e.beforeClose,{args:[u.active],done:()=>w(!1)})},f=D=>{D!==u.active&&(u.active=D,n("change",D))},r=()=>{if(e.showIndex)return l("div",{class:re("index")},[a.index?a.index({index:u.active}):`${u.active+1} / ${e.images.length}`])},S=()=>{if(a.cover)return l("div",{class:re("cover")},[a.cover()])},v=()=>{u.disableZoom=!0},s=()=>{u.disableZoom=!1},M=()=>l(Ot,{ref:t,lazyRender:!0,loop:e.loop,class:re("swipe"),vertical:e.vertical,duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:f,onDragEnd:s,onDragStart:v},{default:()=>[e.images.map((D,R)=>l(xn,{ref:c=>{R===u.active&&(i.value=c)},src:D,show:e.show,active:u.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:u.rootWidth,rootHeight:u.rootHeight,disableZoom:u.disableZoom,doubleScale:e.doubleScale,closeOnClickImage:e.closeOnClickImage,closeOnClickOverlay:e.closeOnClickOverlay,vertical:e.vertical,onScale:k,onClose:O,onLongPress:()=>n("longPress",{index:R})},{image:a.image}))]}),g=()=>{if(e.closeable)return l(ne,{role:"button",name:e.closeIcon,class:[re("close-icon",e.closeIconPosition),ye],onClick:O},null)},p=()=>n("closed"),V=(D,R)=>{var c;return(c=t.value)==null?void 0:c.swipeTo(D,R)};return de({resetScale:()=>{var D;(D=i.value)==null||D.resetScale()},swipeTo:V}),je(b),A([gt,ht],b),A(()=>e.startPosition,D=>f(+D)),A(()=>e.show,D=>{const{images:R,startPosition:c}=e;D?(f(+c),ie(()=>{b(),V(+c,{immediate:!0})})):n("close",{index:u.active,url:R[u.active]})}),()=>l(Ge,ae({class:[re(),e.className],overlayClass:[re("overlay"),e.overlayClass],onClosed:p,"onUpdate:show":w},ee(e,kn)),{default:()=>[g(),M(),r(),S()]})}});let he;const Sn={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function Dn(){({instance:he}=Et({setup(){const{state:e,toggle:n}=Ut(),a=()=>{e.images=[]};return()=>l(at,ae(e,{onClosed:a,"onUpdate:show":n}),null)}}))}const Pn=(e,n=0)=>{if(Ae)return he||Dn(),e=Array.isArray(e)?{images:e,startPosition:n}:e,he.open(N({},Sn,e)),he};ue(at);const[On,B,pn]=q("uploader");function Fe(e,n){return new Promise(a=>{if(n==="file"){a();return}const t=new FileReader;t.onload=i=>{a(i.target.result)},n==="dataUrl"?t.readAsDataURL(e):n==="text"&&t.readAsText(e)})}function ot(e,n){return We(e).some(a=>a.file?yt(n)?n(a.file):a.file.size>+n:!1)}function Tn(e,n){const a=[],t=[];return e.forEach(i=>{ot(i,n)?t.push(i):a.push(i)}),{valid:a,invalid:t}}const Vn=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,Mn=e=>Vn.test(e);function lt(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?Mn(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var _n=Z({props:{name:K,item:te(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:n,slots:a}){const t=()=>{const{status:f,message:r}=e.item;if(f==="uploading"||f==="failed"){const S=f==="failed"?l(ne,{name:"close",class:B("mask-icon")},null):l(be,{class:B("loading")},null),v=Oe(r)&&r!=="";return l("div",{class:B("mask")},[S,v&&l("div",{class:B("mask-message")},[r])])}},i=f=>{const{name:r,item:S,index:v,beforeDelete:s}=e;f.stopPropagation(),Ze(s,{args:[S,{name:r,index:v}],done:()=>n("delete")})},u=()=>n("preview"),b=()=>n("reupload"),k=()=>{if(e.deletable&&e.item.status!=="uploading"){const f=a["preview-delete"];return l("div",{role:"button",class:B("preview-delete",{shadow:!f}),tabindex:0,"aria-label":pn("delete"),onClick:i},[f?f():l(ne,{name:"cross",class:B("preview-delete-icon")},null)])}},w=()=>{if(a["preview-cover"]){const{index:f,item:r}=e;return l("div",{class:B("preview-cover")},[a["preview-cover"](N({index:f},r))])}},O=()=>{const{item:f,lazyLoad:r,imageFit:S,previewSize:v,reupload:s}=e;return lt(f)?l(nt,{fit:S,src:f.objectUrl||f.content||f.url,class:B("preview-image"),width:Array.isArray(v)?v[0]:v,height:Array.isArray(v)?v[1]:v,lazyLoad:r,onClick:s?b:u},{default:w}):l("div",{class:B("file"),style:Ke(e.previewSize)},[l(ne,{class:B("file-icon"),name:"description"},null),l("div",{class:[B("file-name"),"van-ellipsis"]},[f.file?f.file.name:f.url]),w()])};return()=>l("div",{class:B("preview")},[O(),t(),k()])}});const Rn={name:G(""),accept:W("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:G(1/0),imageFit:W("cover"),resultType:W("dataUrl"),uploadIcon:W("photograph"),uploadText:String,deletable:$,reupload:Boolean,afterRead:Function,showUpload:$,modelValue:oe(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:$,previewOptions:Object,previewFullImage:$,maxSize:{type:[Number,String,Function],default:1/0}};var Bn=Z({name:On,props:Rn,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:n,slots:a}){const t=_(),i=[],u=_(-1),b=_(!1),k=(d=e.modelValue.length)=>({name:e.name,index:d}),w=()=>{t.value&&(t.value.value="")},O=d=>{if(w(),ot(d,e.maxSize))if(Array.isArray(d)){const I=Tn(d,e.maxSize);if(d=I.valid,n("oversize",I.invalid,k()),!d.length)return}else{n("oversize",d,k());return}if(d=we(d),u.value>-1){const I=[...e.modelValue];I.splice(u.value,1,d),n("update:modelValue",I),u.value=-1}else n("update:modelValue",[...e.modelValue,...We(d)]);e.afterRead&&e.afterRead(d,k())},f=d=>{const{maxCount:I,modelValue:C,resultType:o}=e;if(Array.isArray(d)){const m=+I-C.length;d.length>m&&(d=d.slice(0,m)),Promise.all(d.map(x=>Fe(x,o))).then(x=>{const z=d.map((H,h)=>{const P={file:H,status:"",message:"",objectUrl:URL.createObjectURL(H)};return x[h]&&(P.content=x[h]),P});O(z)})}else Fe(d,o).then(m=>{const x={file:d,status:"",message:"",objectUrl:URL.createObjectURL(d)};m&&(x.content=m),O(x)})},r=d=>{const{files:I}=d.target;if(e.disabled||!I||!I.length)return;const C=I.length===1?I[0]:[].slice.call(I);if(e.beforeRead){const o=e.beforeRead(C,k());if(!o){w();return}if(bt(o)){o.then(m=>{f(m||C)}).catch(w);return}}f(C)};let S;const v=()=>n("closePreview"),s=d=>{if(e.previewFullImage){const I=e.modelValue.filter(lt),C=I.map(o=>(o.objectUrl&&!o.url&&o.status!=="failed"&&(o.url=o.objectUrl,i.push(o.url)),o.url)).filter(Boolean);S=Pn(N({images:C,startPosition:I.indexOf(d),onClose:v},e.previewOptions))}},M=()=>{S&&S.close()},g=(d,I)=>{const C=e.modelValue.slice(0);C.splice(I,1),n("update:modelValue",C),n("delete",d,k(I))},p=d=>{b.value=!0,u.value=d,ie(()=>L())},V=()=>{b.value||(u.value=-1),b.value=!1},D=(d,I)=>{const C=["imageFit","deletable","reupload","previewSize","beforeDelete"],o=N(ee(e,C),ee(d,C,!0));return l(_n,ae({item:d,index:I,onClick:()=>n(e.reupload?"clickReupload":"clickPreview",d,k(I)),onDelete:()=>g(d,I),onPreview:()=>s(d),onReupload:()=>p(I)},ee(e,["name","lazyLoad"]),o),ee(a,["preview-cover","preview-delete"]))},R=()=>{if(e.previewImage)return e.modelValue.map(D)},c=d=>n("clickUpload",d),y=()=>{const d=e.modelValue.length<+e.maxCount,I=e.readonly?null:l("input",{ref:t,type:"file",class:B("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&u.value===-1,disabled:e.disabled,onChange:r,onClick:V},null);return a.default?De(l("div",{class:B("input-wrapper"),onClick:c},[a.default(),I]),[[_e,d]]):De(l("div",{class:B("upload",{readonly:e.readonly}),style:Ke(e.previewSize),onClick:c},[l(ne,{name:e.uploadIcon,class:B("upload-icon")},null),e.uploadText&&l("span",{class:B("upload-text")},[e.uploadText]),I]),[[_e,e.showUpload&&d]])},L=()=>{t.value&&!e.disabled&&t.value.click()};return He(()=>{i.forEach(d=>URL.revokeObjectURL(d))}),de({chooseFile:L,reuploadFile:p,closeImagePreview:M}),wt(()=>e.modelValue),()=>l("div",{class:B()},[l("div",{class:B("wrapper",{disabled:e.disabled})},[R(),y()])])}});const $n=ue(Bn),Ln={class:"user-page"},En={class:"user-pic"},Un={class:"user-item"},zn={class:"user-item"},Fn={class:"user-item"},Nn={class:"user-item"},Yn={class:"user-item"},An=Z({__name:"index",setup(e){const n=Vt();n.areaList.length||(console.log("测试进程"),n.getCityList(),console.log(n.areaList,"if"));const a=Rt(),t=we({fileList:[],userName:"",showSex:!1,sex:"",birthDay:"",showBirth:!1,workDay:"",showWorkDay:!1,minDate:new Date(1980,0,1),maxDate:new Date(2007,0,1),showCity:!1,city:"",area:"",loading:!1,columnsType:["year","month"]}),i=v=>{t.birthDay=v.selectedValues[0]+"-"+v.selectedValues[1],t.showBirth=!1},u=v=>{t.workDay=v.selectedValues[0]+"-"+v.selectedValues[1],t.showWorkDay=!1},b=[{name:"男"},{name:"女"}],k=async v=>{v.status="uploading",v.message="上传中...";let s=new FormData;s.append("user","test"),s.append("file",v.file);const M=await Mt(s);v.url=M.imageUrl,v.status="success",v.message="上传成功",t.fileList=[v]},w=()=>history.back(),O=()=>{t.userName=a.userInfo.user_name,t.sex=kt.sex(a.userInfo.sex),t.birthDay=a.userInfo.birthday,t.workDay=a.userInfo.work_time,t.city=a.userInfo.city,t.area=a.userInfo.area,a.userInfo.it_head&&(t.fileList=[{url:a.userInfo.it_head}])};a.userInfo.user_name?O():async function(){await a.getUserInfo(),O()}();const f=v=>{t.city=v.selectedOptions[0].text+"-"+v.selectedOptions[1].text,t.area=v.selectedOptions[1].text,t.showCity=!1},r=v=>{t.sex=v.name,t.showSex=!1},S=async()=>{if(t.fileList.length===0){le("请上传头像");return}if(!t.userName){le("填写姓名");return}if(!t.sex){le("您还没有选择性别");return}if(!t.birthDay){le("请选择出生年月");return}if(!t.workDay){le("请选择工作时间");return}if(!t.city){le("请选择城市");return}t.loading=!0,await _t({user_name:t.userName,sex:t.sex==="男"?1:t.sex==="女"?2:"",birthday:t.birthDay,work_time:t.workDay,city:t.city,area:t.area,it_head:t.fileList[0].url,type:1})&&a.getUserInfo(),le("修改成功"),t.loading=!1};return(v,s)=>{const M=Tt,g=$n,p=pt,V=At,D=yn,R=tt,c=Bt;return It(),xt(Ct,null,[l(M,{title:"个人信息","left-arrow":"",onClickLeft:w}),F("div",Ln,[l(c,{onSubmit:S},{default:ve(()=>[F("div",En,[l(g,{modelValue:t.fileList,"onUpdate:modelValue":s[0]||(s[0]=y=>t.fileList=y),accept:".jpg,.png","after-read":k,"max-count":1},null,8,["modelValue"])]),F("div",Un,[s[17]||(s[17]=F("h5",null,"姓名",-1)),l(p,{modelValue:t.userName,"onUpdate:modelValue":s[1]||(s[1]=y=>t.userName=y),label:"",placeholder:"请输入您的姓名"},null,8,["modelValue"])]),F("div",zn,[s[18]||(s[18]=F("h5",null,"性别",-1)),l(p,{modelValue:t.sex,"onUpdate:modelValue":s[2]||(s[2]=y=>t.sex=y),readonly:"","is-link":"",label:"",placeholder:"请选择您的性别",onClick:s[3]||(s[3]=y=>t.showSex=!0)},null,8,["modelValue"]),l(V,{show:t.showSex,"onUpdate:show":s[4]||(s[4]=y=>t.showSex=y),actions:b,"cancel-text":"取消","close-on-click-action":"",onSelect:r},null,8,["show"])]),F("div",Fn,[s[19]||(s[19]=F("h5",null,"出生日期",-1)),l(p,{modelValue:t.birthDay,"onUpdate:modelValue":s[5]||(s[5]=y=>t.birthDay=y),readonly:"","is-link":"",label:"",placeholder:"请选择您的出生年月",onClick:s[6]||(s[6]=y=>t.showBirth=!0)},null,8,["modelValue"]),l(V,{show:t.showBirth,"onUpdate:show":s[8]||(s[8]=y=>t.showBirth=y)},{default:ve(()=>[l(D,{title:"选择日期","min-date":t.minDate,"max-date":t.maxDate,"columns-type":t.columnsType,onConfirm:i,onCancel:s[7]||(s[7]=y=>t.showBirth=!1)},null,8,["min-date","max-date","columns-type"])]),_:1},8,["show"])]),F("div",Nn,[s[20]||(s[20]=F("h5",null,"参加工作的时间",-1)),l(p,{modelValue:t.workDay,"onUpdate:modelValue":s[9]||(s[9]=y=>t.workDay=y),label:"",readonly:"","is-link":"",placeholder:"请选择您的工作时间",onClick:s[10]||(s[10]=y=>t.showWorkDay=!0)},null,8,["modelValue"]),l(V,{show:t.showWorkDay,"onUpdate:show":s[12]||(s[12]=y=>t.showWorkDay=y)},{default:ve(()=>[l(D,{title:"选择日期","min-date":t.minDate,"max-date":t.maxDate,"columns-type":t.columnsType,onConfirm:u,onCancel:s[11]||(s[11]=y=>t.showWorkDay=!1)},null,8,["min-date","max-date","columns-type"])]),_:1},8,["show"])]),F("div",Yn,[s[21]||(s[21]=F("h5",null,"所在城市",-1)),l(p,{modelValue:t.city,"onUpdate:modelValue":s[13]||(s[13]=y=>t.city=y),label:"",placeholder:"请选择您的城市",readonly:"","is-link":"",onClick:s[14]||(s[14]=y=>t.showCity=!0)},null,8,["modelValue"]),l(V,{show:t.showCity,"onUpdate:show":s[16]||(s[16]=y=>t.showCity=y)},{default:ve(()=>[l(R,{columns:St(n).areaList,onConfirm:f,onCancel:s[15]||(s[15]=y=>t.showCity=!1)},null,8,["columns"])]),_:1},8,["show"])]),s[22]||(s[22]=F("button",{class:"wy-confirm-btn","native-type":"submit"},"提交修改",-1))]),_:1,__:[22]})])],64)}}}),aa=Dt(An,[["__scopeId","data-v-e446df7a"]]);export{aa as default};
